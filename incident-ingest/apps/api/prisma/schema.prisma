datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum SectionType {
  impact
  timeline
  rootcause
  fix
}

model Incident {
  id          String    @id @default(uuid()) @db.Uuid
  title       String
  date        DateTime?
  company     String?
  severity    String?
  tags        String[]  @default([])
  summaryText String?   @map("summary_text")
  sections    Section[]

  @@map("incidents")
}

model Section {
  id         String      @id @default(uuid()) @db.Uuid
  incidentId String      @map("incident_id") @db.Uuid
  type       SectionType
  text       String
  incident   Incident    @relation(fields: [incidentId], references: [id], onDelete: Cascade)

  @@map("sections")
}
